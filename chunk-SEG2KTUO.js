import{a as $,b as U}from"./chunk-76O3NOWP.js";import{a as j}from"./chunk-IYUUQAFV.js";import{a as R}from"./chunk-RIZUC5RG.js";import{a as B}from"./chunk-OVAW3OSV.js";import{c as N}from"./chunk-J7ZXTAJT.js";import{C as S,Ca as F,Ia as O,La as I,Na as u,Nb as v,Oa as x,Ob as k,Qb as L,Sa as r,Ta as o,U as C,Ua as M,W as D,Ya as p,ab as a,bb as _,cb as h,db as z,gb as T,ia as E,jb as b,kb as w,p as y,qa as f,v as P,wa as g,ya as d}from"./chunk-CMKRVOCM.js";function W(t,c){if(t&1&&(r(0,"div",4),a(1),o()),t&2){let e=p(),i;d(1),z(" ",(i=e.driver())==null?null:i.givenName," ",(i=e.driver())==null?null:i.familyName," ")}}function q(t,c){t&1&&(r(0,"div",5),a(1,"Cargando piloto..."),o())}function A(t,c){if(t&1&&(r(0,"div",6),a(1),o()),t&2){let e=p();d(1),_(e.driversService.error())}}function V(t,c){t&1&&(r(0,"div",5),a(1,"Cargando informaci\xF3n adicional..."),o())}function Y(t,c){if(t&1&&(r(0,"div",5),a(1),o()),t&2){let e=p(2);d(1),_(e.wikiError())}}function G(t,c){if(t&1&&M(0,"img",23),t&2){let e=p(3),i,n;O("src",(i=e.wiki())==null||i.thumbnail==null?null:i.thumbnail.source,f)("alt",((n=e.wiki())==null?null:n.title)||"Imagen")}}function H(t,c){if(t&1&&(r(0,"a",24),a(1," Ver en Wikipedia "),o()),t&2){let e=p(3),i;O("href",(i=e.wiki())==null||i.content_urls==null||i.content_urls.desktop==null?null:i.content_urls.desktop.page,f)}}function J(t,c){if(t&1&&(r(0,"div",16),u(1,G,1,2,"img",17),r(2,"div",18)(3,"div",19),a(4),o(),r(5,"div",20),a(6),o(),r(7,"p",21),a(8),o(),u(9,H,2,1,"a",22),o()()),t&2){let e=p(2),i,n,l,s,m;d(1),x(1,!((i=e.wiki())==null||i.thumbnail==null)&&i.thumbnail.source?1:-1),d(3),_((n=e.wiki())==null?null:n.title),d(2),_((l=e.wiki())==null?null:l.description),d(2),_((s=e.wiki())==null?null:s.extract),d(1),x(9,!((m=e.wiki())==null||m.content_urls==null||m.content_urls.desktop==null)&&m.content_urls.desktop.page?9:-1)}}function K(t,c){t&1&&(r(0,"div",5),a(1,"Sin informaci\xF3n adicional."),o())}function Q(t,c){t&1&&(r(0,"div",5),a(1,"Cargando datos deportivos..."),o())}function X(t,c){if(t&1&&(r(0,"div",5),a(1),o()),t&2){let e=p(2);d(1),_(e.openF1Error())}}function Z(t,c){if(t&1&&M(0,"img",23),t&2){let e=p(3),i,n;O("src",(i=e.openF1())==null?null:i.headshot_url,f)("alt",((n=e.openF1())==null?null:n.full_name)||"Piloto")}}function tt(t,c){if(t&1&&(r(0,"div",16),u(1,Z,1,2,"img",17),r(2,"div",18)(3,"div",19),a(4),o(),r(5,"div",20),a(6),o(),r(7,"p",21),a(8),o()()()),t&2){let e=p(2),i,n,l,s;d(1),x(1,(i=e.openF1())!=null&&i.headshot_url?1:-1),d(3),_((n=e.openF1())==null?null:n.full_name),d(2),_((l=e.openF1())==null?null:l.team_name),d(2),h(" N\xFAmero ",(s=e.openF1())==null?null:s.driver_number," ")}}function et(t,c){t&1&&(r(0,"div",5),a(1,"Sin datos deportivos adicionales."),o())}function nt(t,c){if(t&1&&(r(0,"div",7)(1,"div",8)(2,"div",9)(3,"span",10),a(4,"Nacionalidad"),o(),r(5,"div",11),M(6,"div"),b(7,"flagClass"),r(8,"span"),a(9),o()()(),r(10,"div",9)(11,"span",10),a(12,"N\xFAmero Permanente"),o(),r(13,"span",12),a(14),o()(),r(15,"div",9)(16,"span",10),a(17,"Fecha de Nacimiento"),o(),r(18,"span",13),a(19),b(20,"dateFormat"),o()(),r(21,"div",9)(22,"span",10),a(23,"Wikipedia"),o(),r(24,"a",14),a(25," Ver biograf\xEDa "),o()()()(),r(26,"div",15)(27,"h2"),a(28,"Sobre"),o(),u(29,V,2,0,"div",3)(30,Y,2,1)(31,J,10,5)(32,K,2,0),o(),r(33,"div",15)(34,"h2"),a(35,"Datos OpenF1"),o(),u(36,Q,2,0,"div",3)(37,X,2,1)(38,tt,9,4)(39,et,2,0),o()),t&2){let e=p(),i,n,l,s,m;d(6),I("fflag ff-md ","fflag-"+w(7,9,(i=e.driver())==null?null:i.nationality),""),d(3),_((n=e.driver())==null?null:n.nationality),d(5),_((l=e.driver())==null?null:l.permanentNumber),d(5),h(" ",w(20,11,(s=(s=e.driver())==null?null:s.dateOfBirth)!==null&&s!==void 0?s:"")," "),d(5),O("href",(m=e.driver())==null?null:m.url,f),d(5),x(29,e.wikiLoading()?29:e.wikiError()?30:e.wiki()?31:32),d(7),x(36,e.openF1Loading()?36:e.openF1Error()?37:e.openF1()?38:39)}}function it(t,c){t&1&&(r(0,"div",5),a(1,"No se encontr\xF3 el piloto."),o())}var ut=(()=>{let c=class c{constructor(){this.route=C(N),this.seasonStore=C(L),this.destroyRef=C(F),this.injector=C(E),this.driversService=C(j),this.wikiService=C($),this.openF1Service=C(U),this.driverId=g(""),this.driver=g(null),this.wiki=g(null),this.wikiLoading=g(!1),this.wikiError=g(null),this.openF1=g(null),this.openF1Loading=g(!1),this.openF1Error=g(null)}ngOnInit(){let i=this.route.snapshot.paramMap.get("id")??"";this.driverId.set(i),k(this.seasonStore.selectedSeason,{injector:this.injector}).pipe(P(n=>!!n),v(this.destroyRef)).subscribe(n=>{let l=this.driversService.getDriverById(i);if(l){this.driver.set(l);return}this.driversService.fetchDriverById(n,i).pipe(v(this.destroyRef)).subscribe(s=>{let m=s.MRData.DriverTable.Drivers?.[0]??null;this.driver.set(m)})}),k(this.driver,{injector:this.injector}).pipe(y(n=>({current:n,query:n?.url??`${n?.givenName??""} ${n?.familyName??""}`.trim()})),P(({query:n})=>!!n),S((n,l)=>n.query===l.query),v(this.destroyRef)).subscribe(({current:n,query:l})=>{this.loadWiki(n,l),this.loadOpenF1(n)})}loadWiki(i,n){this.wikiLoading.set(!0),this.wikiError.set(null),(i?.url?this.wikiService.getSummaryByUrl(i.url,"es"):this.wikiService.getSummaryBySearch(n,"es")).pipe(v(this.destroyRef)).subscribe({next:s=>{this.wiki.set(s),this.wikiLoading.set(!1),s||this.wikiError.set("Sin informaci\xF3n adicional.")},error:()=>{this.wikiLoading.set(!1),this.wikiError.set("No se pudo cargar informaci\xF3n adicional.")}})}loadOpenF1(i){this.openF1Loading.set(!0),this.openF1Error.set(null),this.openF1Service.getLatestDrivers().pipe(v(this.destroyRef)).subscribe({next:n=>{let l=`${i?.givenName??""} ${i?.familyName??""}`.trim(),s=n.find(m=>`${m.first_name??""} ${m.last_name??""}`.trim().toLowerCase()===l.toLowerCase());this.openF1.set(s??null),this.openF1Loading.set(!1),s||this.openF1Error.set("Sin datos deportivos adicionales.")},error:()=>{this.openF1Loading.set(!1),this.openF1Error.set("No se pudo cargar datos deportivos.")}})}};c.\u0275fac=function(n){return new(n||c)},c.\u0275cmp=D({type:c,selectors:[["driver-details"]],standalone:!0,features:[T],decls:9,vars:2,consts:[[1,"container"],[1,"header"],["class","driver-name"],["class","state"],[1,"driver-name"],[1,"state"],[1,"state","error"],[1,"driver-card"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value","nationality"],[1,"value","number"],[1,"value"],["target","_blank",1,"value","link",3,"href"],[1,"wiki-card"],[1,"wiki-content"],["class","wiki-image","loading","lazy",3,"src","alt"],[1,"wiki-text"],[1,"wiki-title"],[1,"wiki-description"],[1,"wiki-extract"],["class","wiki-link","target","_blank",3,"href"],["loading","lazy",1,"wiki-image",3,"src","alt"],["target","_blank",1,"wiki-link",3,"href"]],template:function(n,l){n&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Detalles del Piloto"),o(),u(4,W,2,2,"div",2),o(),u(5,q,2,0,"div",3)(6,A,2,1)(7,nt,40,13)(8,it,2,0),o()),n&2&&(d(4),x(4,l.driver()?4:-1),d(1),x(5,l.driversService.loading()?5:l.driversService.error()?6:l.driver()?7:8))},dependencies:[R,B],styles:[".container[_ngcontent-%COMP%]{padding:28px 20px;max-width:1240px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:28px;text-align:left;display:flex;align-items:flex-end;justify-content:space-between;gap:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(1.8rem,2.6vw,2.6rem);font-weight:700;margin:0;color:var(--color-text);letter-spacing:.6px}.header[_ngcontent-%COMP%]   .season-info[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:1rem;text-transform:uppercase;letter-spacing:1px}.modern-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 10px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;color:var(--color-text-muted);font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:1px;border-bottom:1px solid var(--color-border)}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{padding-left:18px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{padding-right:18px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:var(--color-surface);box-shadow:var(--shadow-1);transition:transform .25s ease,box-shadow .25s ease,background .25s ease}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-2);background:var(--color-surface-strong)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border:none}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-radius:var(--radius-1) 0 0 var(--radius-1);padding-left:18px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 var(--radius-1) var(--radius-1) 0;padding-right:18px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--color-text);font-weight:600;transition:color .2s ease}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--color-accent)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.nationality[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.nationality[_ngcontent-%COMP%]   .fflag[_ngcontent-%COMP%]{margin-right:8px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.number[_ngcontent-%COMP%]{font-weight:700;color:var(--color-text)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .surname[_ngcontent-%COMP%]{font-weight:700;color:var(--color-text);margin-right:5px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .firstname[_ngcontent-%COMP%]{color:var(--color-text-muted)}.state[_ngcontent-%COMP%]{padding:18px 20px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-1);color:var(--color-text);box-shadow:var(--shadow-1)}.state.error[_ngcontent-%COMP%]{border-color:#e1060080;color:#ffd2cf}@media (max-width: 767px){.container[_ngcontent-%COMP%]{padding:20px 14px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}.modern-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-radius:var(--radius-1);padding:8px 0}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:.88rem}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;border-radius:0}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);color:var(--color-text-muted);text-transform:uppercase;letter-spacing:1px;font-size:.72rem}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem}.header[_ngcontent-%COMP%]   .season-info[_ngcontent-%COMP%]{font-size:.85rem}}.driver-name[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--color-text-muted);margin-top:8px;text-transform:uppercase;letter-spacing:1px}.driver-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-2);border:1px solid var(--color-border);box-shadow:var(--shadow-1);padding:28px;margin-top:20px;transition:transform .25s ease,box-shadow .25s ease}.driver-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-2)}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:22px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted);text-transform:uppercase;letter-spacing:1px}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--color-text);font-weight:600}.info-item[_ngcontent-%COMP%]   .value.nationality[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.info-item[_ngcontent-%COMP%]   .value.nationality[_ngcontent-%COMP%]   .fflag[_ngcontent-%COMP%]{margin-right:6px}.info-item[_ngcontent-%COMP%]   .value.number[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:var(--color-accent)}.info-item[_ngcontent-%COMP%]   .value.link[_ngcontent-%COMP%]{color:#9cc2ff;text-decoration:none;transition:color .2s ease}.info-item[_ngcontent-%COMP%]   .value.link[_ngcontent-%COMP%]:hover{color:var(--color-accent-2)}.wiki-card[_ngcontent-%COMP%]{margin-top:20px;background:var(--color-surface);border-radius:var(--radius-2);border:1px solid var(--color-border);box-shadow:var(--shadow-1);padding:24px}.wiki-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 14px;text-transform:uppercase;letter-spacing:1px;font-size:1rem}.wiki-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:140px 1fr;gap:18px;align-items:start}.wiki-image[_ngcontent-%COMP%]{width:100%;border-radius:12px;object-fit:cover;box-shadow:var(--shadow-1)}.wiki-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.05rem}.wiki-description[_ngcontent-%COMP%]{color:var(--color-text-muted);text-transform:uppercase;letter-spacing:1px;font-size:.75rem;margin-bottom:8px}.wiki-extract[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--color-text)}.wiki-link[_ngcontent-%COMP%]{color:#9cc2ff;text-decoration:none;transition:color .2s ease}.wiki-link[_ngcontent-%COMP%]:hover{color:var(--color-accent-2)}@media (max-width: 767px){.driver-card[_ngcontent-%COMP%]{padding:20px}.info-grid[_ngcontent-%COMP%]{gap:18px}.wiki-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let t=c;return t})();export{ut as DriverDetailsComponent};
