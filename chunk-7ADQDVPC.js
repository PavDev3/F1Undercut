import{D as d,K as m,Lb as S,Nb as g,O as k,Ob as b,Pb as c,Qb as y,U as o,a as n,b as h,j as l,p as u,v as p,va as a,w as f,wa as r}from"./chunk-CMKRVOCM.js";var v=(()=>{let e=class e{constructor(){this.http=o(S),this.seasonStore=o(y),this.state=r({season:"",tracks:[]}),this.loading=r(!0),this.error=r(null),this.season=a(()=>this.state().season),this.tracks=a(()=>this.state().tracks),b(this.seasonStore.selectedSeason).pipe(p(t=>!!t),m(()=>this.fetchTracksBySeason()),g()).subscribe(t=>{this.state.update(s=>h(n({},s),{season:t.MRData.CircuitTable.season,tracks:t.MRData.CircuitTable.Circuits}))})}fetchTracksBySeason(){this.loading.set(!0),this.error.set(null);let t=this.seasonStore.selectedSeason();return this.http.get(`${c}/${t}/circuits.json`).pipe(d(()=>this.loading.set(!1)),f(s=>(console.error("Error fetching tracks:",s),this.error.set("No se pudieron cargar los circuitos."),l)),u(s=>s))}getTrackById(t){return this.state().tracks.find(s=>s.circuitId===t)}fetchTrackById(t,s){return this.http.get(`${c}/${t}/circuits/${s}.json`)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{v as a};
