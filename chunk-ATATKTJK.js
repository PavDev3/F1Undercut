import{a as V}from"./chunk-7ADQDVPC.js";import{a as Y,b as $}from"./chunk-76O3NOWP.js";import{a as W,b as q}from"./chunk-XU55GCMC.js";import{c as N}from"./chunk-J7ZXTAJT.js";import{C as T,Ca as D,Cb as R,Ia as O,La as z,Na as C,Nb as f,Oa as x,Ob as S,Qb as U,Sa as a,Ta as o,U as m,Ua as v,W as F,Xa as I,Ya as g,ab as r,bb as u,cb as h,db as B,gb as j,ia as L,jb as w,kb as y,p as E,qa as M,v as b,wa as _,ya as d}from"./chunk-CMKRVOCM.js";function A(t,c){if(t&1&&(a(0,"div",5),r(1),o()),t&2){let i=g(),e;d(1),u((e=i.track())==null?null:e.circuitName)}}function G(t,c){t&1&&(a(0,"div",6),r(1,"Cargando circuito..."),o())}function H(t,c){if(t&1&&(a(0,"div",7),r(1),o()),t&2){let i=g();d(1),u(i.tracksService.error())}}function J(t,c){t&1&&(a(0,"div",6),r(1,"Cargando informaci\xF3n adicional..."),o())}function K(t,c){t&1&&(a(0,"div",6),r(1,"Pr\xF3ximamente"),o())}function Q(t,c){if(t&1&&v(0,"img",24),t&2){let i=g(3),e,n;O("src",(e=i.wiki())==null||e.thumbnail==null?null:e.thumbnail.source,M)("alt",((n=i.wiki())==null?null:n.title)||"Imagen")}}function X(t,c){if(t&1&&(a(0,"a",25),r(1," Ver en Wikipedia "),o()),t&2){let i=g(3),e;O("href",(e=i.wiki())==null||e.content_urls==null||e.content_urls.desktop==null?null:e.content_urls.desktop.page,M)}}function Z(t,c){if(t&1&&(a(0,"div",17),C(1,Q,1,2,"img",18),a(2,"div",19)(3,"div",20),r(4),o(),a(5,"div",21),r(6),o(),a(7,"p",22),r(8),o(),C(9,X,2,1,"a",23),o()()),t&2){let i=g(2),e,n,l,s,p;d(1),x(1,!((e=i.wiki())==null||e.thumbnail==null)&&e.thumbnail.source?1:-1),d(3),u((n=i.wiki())==null?null:n.title),d(2),u((l=i.wiki())==null?null:l.description),d(2),u((s=i.wiki())==null?null:s.extract),d(1),x(9,!((p=i.wiki())==null||p.content_urls==null||p.content_urls.desktop==null)&&p.content_urls.desktop.page?9:-1)}}function tt(t,c){t&1&&(a(0,"div",6),r(1,"Pr\xF3ximamente"),o())}function nt(t,c){t&1&&(a(0,"div",6),r(1,"Cargando datos deportivos..."),o())}function et(t,c){t&1&&(a(0,"div",6),r(1,"Pr\xF3ximamente"),o())}function it(t,c){if(t&1&&v(0,"img",24),t&2){let i=g(3),e,n;O("src",(e=i.openF1())==null?null:e.circuit_image,M)("alt",((n=i.openF1())==null?null:n.circuit_short_name)||"Circuito")}}function ot(t,c){if(t&1&&(a(0,"div",17),C(1,it,1,2,"img",18),a(2,"div",19)(3,"div",20),r(4),o(),a(5,"div",21),r(6),o(),a(7,"p",22),r(8),o()()()),t&2){let i=g(2),e,n,l,s;d(1),x(1,(e=i.openF1())!=null&&e.circuit_image?1:-1),d(3),u((n=i.openF1())==null?null:n.meeting_name),d(2),B(" ",(l=i.openF1())==null?null:l.location," \xB7 ",(l=i.openF1())==null?null:l.country_name," "),d(2),h(" Tipo: ",(s=i.openF1())==null?null:s.circuit_type," ")}}function at(t,c){t&1&&(a(0,"div",6),r(1,"Pr\xF3ximamente"),o())}function rt(t,c){if(t&1&&(a(0,"div",8)(1,"div",9)(2,"div",10)(3,"span",11),r(4,"Pa\xEDs"),o(),a(5,"div",12),v(6,"div"),w(7,"flagClass"),a(8,"span"),r(9),w(10,"nationalityEs"),o()()(),a(11,"div",10)(12,"span",11),r(13,"Ciudad"),o(),a(14,"span",13),r(15),o()(),a(16,"div",10)(17,"span",11),r(18,"Coordenadas"),o(),a(19,"div",14)(20,"span"),r(21),o(),a(22,"span"),r(23),o()()(),a(24,"div",10)(25,"span",11),r(26,"Wikipedia"),o(),a(27,"a",15),r(28," Ver informaci\xF3n del circuito "),o()()()(),a(29,"div",16)(30,"h2"),r(31,"Sobre"),o(),C(32,J,2,0,"div",4)(33,K,2,0)(34,Z,10,5)(35,tt,2,0),o(),a(36,"div",16)(37,"h2"),r(38,"Datos OpenF1"),o(),C(39,nt,2,0,"div",4)(40,et,2,0)(41,ot,9,5)(42,at,2,0),o()),t&2){let i=g(),e,n,l,s,p,P;d(6),z("fflag ff-md ","fflag-"+y(7,10,(e=i.track())==null||e.Location==null?null:e.Location.country),""),d(3),u(y(10,12,(n=i.track())==null||n.Location==null?null:n.Location.country)),d(6),u((l=i.track())==null||l.Location==null?null:l.Location.locality),d(6),h("Lat: ",(s=i.track())==null||s.Location==null?null:s.Location.lat,""),d(2),h("Long: ",(p=i.track())==null||p.Location==null?null:p.Location.long,""),d(4),O("href",(P=i.track())==null?null:P.url,M),d(5),x(32,i.wikiLoading()?32:i.wikiError()?33:i.wiki()?34:35),d(7),x(39,i.openF1Loading()?39:i.openF1Error()?40:i.openF1()?41:42)}}function lt(t,c){t&1&&(a(0,"div",6),r(1,"No se encontr\xF3 el circuito."),o())}var Ot=(()=>{let c=class c{constructor(){this.route=m(N),this.seasonStore=m(U),this.destroyRef=m(D),this.injector=m(L),this.location=m(R),this.tracksService=m(V),this.wikiService=m(Y),this.openF1Service=m($),this.circuitId=_(""),this.track=_(null),this.wiki=_(null),this.wikiLoading=_(!1),this.wikiError=_(null),this.openF1=_(null),this.openF1Loading=_(!1),this.openF1Error=_(null)}ngOnInit(){let e=this.route.snapshot.paramMap.get("id")??"";this.circuitId.set(e),S(this.seasonStore.selectedSeason,{injector:this.injector}).pipe(b(n=>!!n),f(this.destroyRef)).subscribe(n=>{let l=this.tracksService.getTrackById(e);if(l){this.track.set(l);return}this.tracksService.fetchTrackById(n,e).pipe(f(this.destroyRef)).subscribe(s=>{let p=s.MRData.CircuitTable.Circuits?.[0]??null;this.track.set(p)})}),S(this.track,{injector:this.injector}).pipe(E(n=>({current:n,query:n?.url??n?.circuitName??""})),b(({query:n})=>!!n),T((n,l)=>n.query===l.query),f(this.destroyRef)).subscribe(({current:n,query:l})=>{this.loadWiki(n,l),this.loadOpenF1(n)})}loadWiki(e,n){this.wikiLoading.set(!0),this.wikiError.set(null),(e?.url?this.wikiService.getSummaryByUrl(e.url,"es"):this.wikiService.getSummaryBySearch(n,"es")).pipe(f(this.destroyRef)).subscribe({next:s=>{this.wiki.set(s),this.wikiLoading.set(!1),s||this.wikiError.set("Sin informaci\xF3n adicional.")},error:()=>{this.wikiLoading.set(!1),this.wikiError.set("No se pudo cargar informaci\xF3n adicional.")}})}loadOpenF1(e){this.openF1Loading.set(!0),this.openF1Error.set(null);let n=this.seasonStore.selectedSeason();this.openF1Service.getMeetingsByYear(n||"2025").pipe(f(this.destroyRef)).subscribe({next:l=>{let s=e?.Location?.country??"",p=e?.circuitName??"",P=l.find(k=>(k.country_name??"").toLowerCase()===s.toLowerCase())||l.find(k=>(k.circuit_short_name??"").toLowerCase()===p.toLowerCase())||null;this.openF1.set(P),this.openF1Loading.set(!1),P||this.openF1Error.set("Sin datos deportivos adicionales.")},error:()=>{this.openF1Loading.set(!1),this.openF1Error.set("No se pudo cargar datos deportivos.")}})}goBack(){this.location.back()}};c.\u0275fac=function(n){return new(n||c)},c.\u0275cmp=F({type:c,selectors:[["track-details"]],standalone:!0,features:[j],decls:11,vars:2,consts:[[1,"container"],[1,"header"],["type","button",1,"back-button",3,"click"],["class","track-name"],["class","state"],[1,"track-name"],[1,"state"],[1,"state","error"],[1,"track-card"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value","nationality"],[1,"value"],[1,"value","coordinates"],["target","_blank",1,"value","link",3,"href"],[1,"wiki-card"],[1,"wiki-content"],["class","wiki-image","loading","lazy",3,"src","alt"],[1,"wiki-text"],[1,"wiki-title"],[1,"wiki-description"],[1,"wiki-extract"],["class","wiki-link","target","_blank",3,"href"],["loading","lazy",1,"wiki-image",3,"src","alt"],["target","_blank",1,"wiki-link",3,"href"]],template:function(n,l){n&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Detalles del Circuito"),o(),a(4,"button",2),I("click",function(){return l.goBack()}),r(5," \u2190 Volver "),o(),C(6,A,2,1,"div",3),o(),C(7,G,2,0,"div",4)(8,H,2,1)(9,rt,43,14)(10,lt,2,0),o()),n&2&&(d(6),x(6,l.track()?6:-1),d(1),x(7,l.tracksService.loading()?7:l.tracksService.error()?8:l.track()?9:10))},dependencies:[W,q],styles:[".container[_ngcontent-%COMP%]{padding:28px 20px;max-width:1240px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:28px;text-align:left;display:flex;align-items:flex-end;justify-content:space-between;gap:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(1.8rem,2.6vw,2.6rem);font-weight:700;margin:0;color:var(--color-text);letter-spacing:.6px}.header[_ngcontent-%COMP%]   .season-info[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:1rem;text-transform:uppercase;letter-spacing:1px}.modern-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 10px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;color:var(--color-text-muted);font-weight:600;text-transform:uppercase;font-size:.85rem;letter-spacing:1px;border-bottom:1px solid var(--color-border)}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{padding-left:18px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{padding-right:18px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:var(--color-surface);box-shadow:var(--shadow-1);transition:transform .25s ease,box-shadow .25s ease,background .25s ease}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-2);background:var(--color-surface-strong)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border:none}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-radius:var(--radius-1) 0 0 var(--radius-1);padding-left:18px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 var(--radius-1) var(--radius-1) 0;padding-right:18px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--color-text);font-weight:600;transition:color .2s ease}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--color-accent)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.nationality[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.nationality[_ngcontent-%COMP%]   .fflag[_ngcontent-%COMP%]{margin-right:8px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.number[_ngcontent-%COMP%]{font-weight:700;color:var(--color-text)}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .surname[_ngcontent-%COMP%]{font-weight:700;color:var(--color-text);margin-right:5px}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .firstname[_ngcontent-%COMP%]{color:var(--color-text-muted)}.state[_ngcontent-%COMP%]{padding:18px 20px;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-1);color:var(--color-text);box-shadow:var(--shadow-1)}.state.error[_ngcontent-%COMP%]{border-color:#e1060080;color:#ffd2cf}@media (max-width: 767px){.container[_ngcontent-%COMP%]{padding:20px 14px}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}.modern-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-radius:var(--radius-1);padding:8px 0}.modern-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:.88rem}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;border-radius:0}.modern-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);color:var(--color-text-muted);text-transform:uppercase;letter-spacing:1px;font-size:.72rem}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.6rem}.header[_ngcontent-%COMP%]   .season-info[_ngcontent-%COMP%]{font-size:.85rem}}.track-name[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--color-text-muted);margin-top:8px;text-transform:uppercase;letter-spacing:1px}.track-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-2);border:1px solid var(--color-border);box-shadow:var(--shadow-1);padding:28px;margin-top:20px;transition:transform .25s ease,box-shadow .25s ease}.track-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-2)}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:22px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted);text-transform:uppercase;letter-spacing:1px}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--color-text);font-weight:600}.info-item[_ngcontent-%COMP%]   .value.nationality[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.info-item[_ngcontent-%COMP%]   .value.nationality[_ngcontent-%COMP%]   .fflag[_ngcontent-%COMP%]{margin-right:6px}.info-item[_ngcontent-%COMP%]   .value.coordinates[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;font-family:Courier New,monospace;font-size:.98rem;color:var(--color-text-muted)}.info-item[_ngcontent-%COMP%]   .value.link[_ngcontent-%COMP%]{color:#9cc2ff;text-decoration:none;transition:color .2s ease}.info-item[_ngcontent-%COMP%]   .value.link[_ngcontent-%COMP%]:hover{color:var(--color-accent-2)}.wiki-card[_ngcontent-%COMP%]{margin-top:20px;background:var(--color-surface);border-radius:var(--radius-2);border:1px solid var(--color-border);box-shadow:var(--shadow-1);padding:24px}.wiki-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 14px;text-transform:uppercase;letter-spacing:1px;font-size:1rem}.wiki-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:140px 1fr;gap:18px;align-items:start}.wiki-image[_ngcontent-%COMP%]{width:100%;border-radius:12px;object-fit:cover;box-shadow:var(--shadow-1)}.wiki-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.05rem}.wiki-description[_ngcontent-%COMP%]{color:var(--color-text-muted);text-transform:uppercase;letter-spacing:1px;font-size:.75rem;margin-bottom:8px}.wiki-extract[_ngcontent-%COMP%]{margin:0 0 12px;color:var(--color-text)}.wiki-link[_ngcontent-%COMP%]{color:#9cc2ff;text-decoration:none;transition:color .2s ease}.wiki-link[_ngcontent-%COMP%]:hover{color:var(--color-accent-2)}.back-button[_ngcontent-%COMP%]{margin-left:auto;background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:999px;padding:6px 12px;font-size:.75rem;text-transform:uppercase;letter-spacing:1px;cursor:pointer}@media (max-width: 767px){.back-button[_ngcontent-%COMP%]{align-self:flex-start}.track-card[_ngcontent-%COMP%]{padding:20px}.info-grid[_ngcontent-%COMP%]{gap:18px}.wiki-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let t=c;return t})();export{Ot as TrackDetailsComponent};
